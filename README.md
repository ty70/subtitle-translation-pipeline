# ğŸ¥ Subtitle Translation Pipeline â€“ ASSå­—å¹•è‹±æ—¥ç¿»è¨³ãƒ„ãƒ¼ãƒ«é›†

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ASSå½¢å¼ã®è‹±èªå­—å¹•ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.assï¼‰ã‚’è‡ªç„¶ãªæ—¥æœ¬èªå­—å¹•ã«å¤‰æ›ã™ã‚‹ãŸã‚ã®ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—ã®ãƒ„ãƒ¼ãƒ«ç¾¤ã§ã™ã€‚

## ğŸ” æ¦‚è¦

YouTubeãªã©ã®å‹•ç”»ã«ä»˜å±ã™ã‚‹å­—å¹•ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆASSå½¢å¼ï¼‰ã‚’å¯¾è±¡ã«ã€æ¬¡ã®å‡¦ç†ã‚’é †ã«è¡Œã„ã¾ã™ï¼š

1. **è‹±èªå­—å¹•ã®æŠ½å‡º**ï¼ˆ`scripts/extract_ass_text.py`ï¼‰
2. **æ–‡ã®çµåˆãƒ»æ•´å½¢**ï¼ˆ`scripts/merge_sentences.py`ï¼‰
3. **æ—¥æœ¬èªã¸ã®ç¿»è¨³ã¨è‡ªç„¶ãªæ–‡åˆ†å‰²**ï¼ˆ`scripts/translate_en_to_ja_json.py`ï¼‰
4. **ASSãƒ•ã‚¡ã‚¤ãƒ«å†…ã®å­—å¹•ç½®æ›**ï¼ˆ`scripts/ass_replace_with_translation.py`ï¼‰

ã¾ãŸã€æœ¬ãƒ„ãƒ¼ãƒ«ã¯ [YouTube Subtitle Pipeline](http://github.com/ty70/youtube-subtitle-pipeline.git) ã‚’ä½¿ã£ã¦è‹±èªã®éŸ³å£°æ–‡å­—èµ·ã“ã—ã‹ã‚‰ `.ass` å­—å¹•ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¾‹ï¼š`input/input.ass`ï¼‰ã‚’ä½œæˆã—ãŸå¾Œã®å¾Œå‡¦ç†ãƒ„ãƒ¼ãƒ«ç¾¤ã¨ã—ã¦ã‚‚æ´»ç”¨ã§ãã¾ã™ã€‚

---

## â™»ï¸ ä½¿ç”¨ä¾‹

```bash
# ã‚¹ãƒ†ãƒƒãƒ—1: ASSå­—å¹•ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰è‹±èªãƒ†ã‚­ã‚¹ãƒˆã‚’æŠ½å‡º
python scripts/extract_ass_text.py --input input/input.ass --output extracted_en.txt

# ã‚¹ãƒ†ãƒƒãƒ—2: æ–‡ã‚’è‡ªç„¶ãªåŒºåˆ‡ã‚Šã§ãƒãƒ¼ã‚¸ã—ã¦ç¿»è¨³ã—ã‚„ã™ã„å½¢ã«æ•´å½¢
python scripts/merge_sentences.py --input extracted_en.txt --output merged_en.json

# ã‚¹ãƒ†ãƒƒãƒ—3: ç¿»è¨³ã¨è‡ªç„¶ãªæ—¥æœ¬èªã¸ã®åˆ†å‰²çµæœã‚’JSONå½¢å¼ã§å‡ºåŠ›
python scripts/translate_en_to_ja_json.py --input merged_en.json --output output.json

# ã‚¹ãƒ†ãƒƒãƒ—4: ASSå­—å¹•å†…ã®è‹±èªãƒ†ã‚­ã‚¹ãƒˆã‚’æ—¥æœ¬èªå­—å¹•ã§ç½®æ›
python scripts/ass_replace_with_translation.py --input input/input.ass --json output.json --output modified_output.ass
```

---

## ğŸ”§ å„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®èª¬æ˜

### `extract_ass_text.py`ï¼ˆå®Œæˆåº¦ï¼šâœ… OKï¼‰
ASSãƒ•ã‚¡ã‚¤ãƒ«ã® [Events] ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‹ã‚‰15è¡Œç›´å‰ä»¥é™ã® `Text` éƒ¨åˆ†ã‚’æŠ½å‡ºã—ã€ãƒ—ãƒ¬ãƒ¼ãƒ³ãªè‹±èªãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦å‡ºåŠ›ã—ã¾ã™ã€‚

### `merge_sentences.py`ï¼ˆå®Œæˆåº¦ï¼šâš ï¸ ãƒ”ãƒªã‚ªãƒ‰ã§æ•´å½¢ã•ã‚Œã‚‹ãŒã€ç¿»è¨³æ™‚ã«ã‚„ã‚„ä¸è‡ªç„¶ï¼‰
è¤‡æ•°ã®å­—å¹•ã«ã¾ãŸãŒã‚‹æ–‡ã‚’ä¸€ã¤ã«ã¾ã¨ã‚ã€å¥ç‚¹ï¼ˆãƒ”ãƒªã‚ªãƒ‰ï¼‰ã§æ•´å½¢ã™ã‚‹ã“ã¨ã§ã€ç¿»è¨³ã®è³ªã‚’é«˜ã‚ã¾ã™ã€‚

### `translate_en_to_ja_json.py`ï¼ˆå®Œæˆåº¦ï¼šâš ï¸ è‹±è¨³ã‚‚å¾®å¦™ï¼ˆã“ã‚Œã¯æ–‡ã ã‘ã§ç¿»è¨³ã—ã¦ã„ã‚‹ã®ã§ã€ã‚ã‚‹ç¨‹åº¦ä»•æ–¹ãªã„ï¼‰ã—ã£ã‹ã‚Šè¡Œæ•°ã«æ—¥æœ¬èªã‚’åˆ†ã‘ã¦ãã‚Œãªã„ï¼Œæ”¹å–„ã™ã‚‹å¿…è¦ã‚ã‚Šï¼‰
Deep Translatorãªã©ã‚’ä½¿ã£ã¦è‹±èªæ–‡ã‚’æ—¥æœ¬èªã«ç¿»è¨³ã—ã€å¯¾å¿œã™ã‚‹è¡Œæ•°ã«å¿œã˜ã¦è‡ªç„¶ã«åˆ†å‰²ã—ã¾ã™ã€‚`output.json` å½¢å¼ã§ä¿å­˜ã—ã¾ã™ã€‚

### `ass_replace_with_translation.py`ï¼ˆå®Œæˆåº¦ï¼šâœ… OKï¼‰
å…ƒã® `.ass` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿å–ã‚Šã€JSONãƒ•ã‚¡ã‚¤ãƒ«ã«åŸºã¥ã„ã¦è‹±èªã®ã‚»ãƒªãƒ•ã‚’æ—¥æœ¬èªã«ç½®æ›ã—ãŸå­—å¹•ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

---

## ğŸ§½ å‡¦ç†ãƒ•ãƒ­ãƒ¼å›³

```
input/input.ass
      â†“
scripts/extract_ass_text.py
      â†“
extracted_en.txt
      â†“
scripts/merge_sentences.py
      â†“
merged_en.txt
      â†“
scripts/translate_en_to_ja_json.py
      â†“
output.json
      â†“
scripts/ass_replace_with_translation.py
      â†“
modified_output.ass
```

---

## ğŸš€ å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒª

```bash
pip install deep-translator
```

---

## ğŸŒ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT [License](./LICENSE) ã‚’é©ç”¨ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ™‡â€â™‚ï¸ è²¢çŒ®

ãƒã‚°å ±å‘Šã‚„æ©Ÿèƒ½æ”¹å–„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ãƒ—ãƒ«ãƒªã‚¯å¤§æ­“è¿ã§ã™ï¼

